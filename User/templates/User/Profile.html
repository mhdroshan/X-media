{% extends 'base.html' %} 
{% block title %}Profile{% endblock %}
 {% block content %}

 {%if flag%}
    <script>
        alert("Image added sucessfully..!")
    </script>
{%endif%}



<div class="profile-holder">
  {% if user %}
  <form action="{% url 'User:change' user.id %}"  method="post">
    {% csrf_token %}
  	<div class="switch-wrapper">
      <p>Show profile</p>
      <div class="switch">
        <input type="radio" class="switch-radio left" id="radio-left" name="anontype" value="1" />
        <input type="radio" class="switch-radio right" id="radio-right" name="anontype" value="0" />
  
          <div class="slider">
            <label class="switch-radio-label left active" for="radio-left">Yes</label>
            <label class="switch-radio-label right inactive" for="radio-right">No</label>
          </div>
      </div>
    </div>
  

</form>

  <h2 class="user-name">
  {% if user.u_security %}
  Anonymous
{% else %}
 {{user.u_name}}
{% endif %}
  </h2>
  
  {%if user.u_security%}
  
  <img class="user-image" style="border-color: black;" alt="anonymous" src="https://img.icons8.com/ios-filled/256/000000/anonymous-mask.png"/>
    {% else %}
    <img
    class="user-image"
    src="{{user.u_pic.url}}"
    alt="profile-pic"
    srcset=""
  />
    {%endif %}
  
  <div class="row">
    <div class="col-md-4">
      <div class="address-holder">
        <center><i class="fa fa-map-marker" aria-hidden="true"></i></center>
        <div class="places">
          <p>Country:</p>
          <p>{{user.u_country}}</p>
        </div>

        <div class="places">
          <p>State:</p>
          <p>{{user.u_state}}</p>
        </div>

        <div class="places">
          <p>Place:</p>
          <p>{{user.u_place}}</p>
        </div>
      </div>
    </div>
    <div class="col-md-8">
      <div class="my-posts-holder">
        <h2>My Posts</h2>
        <div class="eachpost">
          {% if mypost %} 
          {% for post in mypost %}


          <div class="mypost">
            <p class="mypost-tag">{{post.tag_id.tag_name}}</p>
            <marquee>{{post.p_title}}</marquee>
            <!-- <p class="post-title">{{post.p_title}}</p> -->
            <div class="score-holder">
              <div class="one-score">{{post.pvoted.all.count}}</div>
              <div class="one-score">{{post.nvoted.all.count}}</div>
            </div>
            
            
              
              <button type="button" class="add-img-butt" data-toggle="modal" data-target="#my{{forloop.counter}}modal"><i class="fa fa-plus" aria-hidden="true"></i>Images</button>
               <!-- modal -->
          <div class="modal fade-scale" id="my{{forloop.counter}}modal" role="dialog">
            <div class="modal-dialog">
            
              <!-- Modal content-->
              <div class="modal-content">
                <div class="modal-header">
                  <h4 class="modal-title">{{post.p_title}}</h4>
                </div>
                <div class="modal-body">
                  <form action="{% url 'User:moreimage' post.id %}" method="post" enctype="multipart/form-data">
                    {% csrf_token %}
                  <div class="PE-input-holder">
                    <p>Give a title to the image:</p>
                    <input class="PE-input"  type="text" name="imagetitle" id="" required placeholder="image title">
                </div>
                <div class="PE-input-holder">
                  <p>Add an image:</p>
                  <input required type="file" class="PE-input" name="postImage" id="">
              </div>
              <input class="PE-submit" type="submit" value="Add">
                 
                  </form>
                </div>
              </div>
              
            </div>
          </div>
          <!-- modal end -->
            
            <p class="mypost-date">{{post.p_dateTime}}</p>
          </div>

         
          {% endfor %} 
          {% else %}

          <div class="tag-error">No Posts</div>

          {% endif %}
        </div>
      </div>
    </div>
  </div>
  <script>
    $( document ).ready(function() {
      
      $('input[type=radio]').on('change', function() {
        
        $(this).closest("form").submit();
      });
      {% if user.u_security %}
      $("#radio-left").prop("checked", true);
      {% else %}
      $("#radio-right").prop("checked", true);
      {% endif %}
    });

  </script>
  {% endif %}
</div>


{% endblock content %}
